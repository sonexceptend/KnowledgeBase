# Структуры и классы в C#

Главное отличие структур и классов: структуры передаются по значению (то есть копируются), объекты классов - по ссылке. Именно это является существеннейшим различием в их поведении, а не то, где они хранятся. 

Примечание: структуру тоже можно передать по ссылке, используя модификаторы out и ref.

> Чем больше Вы будете использовать структуры вместо небольших (наверное, правильнее будет сказать – маленьких) классов, тем менее затратным по ресурсам будет использование памяти.

Вы не можете использовать оператор сравнения (==) и противоположные ему (!=) на своих структурах. Однако, Вы можете явно объявить и реализовать операторы для своих структур.

```c#
struct Time
{
 public Time() { ... } // compile-time error
 ...
}
```

Причина возникновении ошибки в том, что Вы не можете использовать конструктор по умолчанию (без параметров) для структуры, потому что компилятор всегда генерирует его сам. Что же касается класса, то компилятор создает конструктор по умолчанию, только в том случае, если Вы его не создали. Сгенерированный конструктор для структуры всегда устанавливает поля в 0, false или null – как и для классов. Нельзя инициализировать переменные в месте их объявления!

> Если делать свой контсруктор, то обязательно все переменные должны быть инициализированы!

Вы можете создавать nullable версию переменной типа структуры использую модификатор “?” и потом присвоить ей значение null:

```c#
Time? currentTime = null;
```

К особенностям структур можно отнести еще и тот факт, что вследствие того, что структуры являются значимым типом, то можно создать структуру без использования конструктора, например:

```c#
Time now;
```

В таком случае, переменная создается, но поля не будут инициализированы в соответствии параметрами конструктора.

Пример:

```C#
Console.WriteLine("Structures:");
TimeStruct time;
TimeStruct time2 = new TimeStruct();
time2.hours = 1;
time = time2;
time.hours = 2;
Console.WriteLine(time2.ToString());
Console.WriteLine(time.ToString());

Console.WriteLine();

Console.WriteLine("Classes:");
TimeClass timec;
TimeClass timec2 = new TimeClass();
timec2.hours = 1;
timec = timec2;
timec.hours = 2;
Console.WriteLine(timec2.ToString());
Console.WriteLine(timec.ToString());

struct TimeStruct
{
    public int hours, minutes, seconds;
    public override string ToString()
    {
        return hours + ":" + minutes + ":" + seconds;
    }
}

class TimeClass
{
    public int hours, minutes, seconds;
    public override string ToString()
    {
        return hours + ":" + minutes + ":" + seconds;
    }
}
```